# 11. 컴포즈 애플리케이션 빌드 및 테스트
- 애플리케이션 패키징 -> 도커 명령
- 애플리케이션 아키텍처 -> 도커 컴포즈 시작/명령
- CI -> 애플리케이션 빌드, 테스트 수행 절차 -> 애플리케이션 검증, 패키징 완료

## 11.1 도커를 이용한 지속적 통합 절차
- CI는 프로젝트마다 다름 -> 도커는 어떤 프로젝트든 빌드, 테스트, 패키징, 배포 까지 일관성 있게 생성
- 이미지 빌드, E2E 테스트 가능
- 형상관리 -> 이미지 레지스트리 -> CI 작업 수행 

## 11.2 도커를 이용한 빌드 인프라스트럭쳐 구축
- 내부 내트워크 안에서 인프라 구축시 사용가능하다.
- Jenkins 구축
- 애플리케이션이 호스트에 동작중인 도커의 모든 기능 접근 가능하다. (보안문제)
- 같은 도커 네트워크에서 동작하는 컨테이너인 git 서버 + 도커 레지스트리
- CI는 애플리케이션을 빌드하는 명령 하나 + Dockerfile, Compose 파일

## 11.3 컴포즈를 이용한 빌드 설정
- CI 와 개발자 로컬 빌드를 매끄럽게 지원하려면 환경변수를 이용하면된다. 
  - 환경 변수에 따른 IMAGE REGISTRY 위치를 다르게 COMPOSE 파일에 주면된다.
  - 빌드 번호도 환경 변수로 준다.
- ARG 인스트럭션은 이미지를 빌드하는데 유효하다.
- ENV 인스트럭션은 컨테이너가 실행될때도 유효하다.
- Compose의 build 블록은 크게 세부분으로 나뉜다.
  - context: 디렉터리 지정
  - Dockerfile: context에서 지정된 경로 기준
  - args 빌드시에 전달할 인자. (BUILD_NUMBER, BUILD_TAG)

## 11.4 도커 외의 의존모듈이 불필요한 ci 작업 만들기
- 빌드파일
- .bat으로 만들어서 다른 managed service에 의존성 제거합니다.
- 검증단계 -> 빌드단계 -> 테스트 단계 -> 푸시 단계

## 11.5 CI 파이프 라인에 관계된 컨테이너
- 빌드 -> 테스트 -> 사내 배포 -> 이미지 검증(취약점 탐지) -> 이미지 사이닝 -> 일반 배포

## 11.6 연습 문제
