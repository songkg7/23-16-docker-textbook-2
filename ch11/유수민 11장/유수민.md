---
marp: true
---
# 11장. 도커와 도커 컴포즈를 이용한 애플리케이션 빌드 및 테스트

* CI : 정기적으로 반복되며 애플리케이션을 빌드하고 일련의 테스트를 수행하는 절차
* 도커를 이용하면 CI 작업의 대부분을 간소화 할 수 있다.
* 도커는 CI 절차의 일관성을 유지해준다.


---
## 11.1 도커를 이용한 지속적 통합 절차

* 도커화된 CI절차에서는 모든 일이 컨테이너 안에서 진행된다.
* 전체 절차를 수행하려면 중앙 집권적 형상 관리 시스템, 이미지를 저장할 도커 레지스트리, CI 작업을 수행할 자동화 서버 등
  인프라가 필요하다.

---

## 11.2 도커를 이용한 빌드 인프라스트럭처 구축하기
* 도커 CLI는 도커 API를 호출하는 방식으로 동작하기 때문에 다른 곳에도 위치한 CLI도 같은 도커 엔진에 접속 할 수 있다.
* 도커 CLI는 기본적으로 로컬 컴퓨터에서 실행 중인 API에 접속을 시도한다.
* 통신 과정은 호스트 컴퓨터 안으로 국한된 채널을 사용 - 리눅스 환경 : 소켓을 사용, 윈도우 : 명명된 파이프

---
## 11.3
* 도커 컴포즈로 애플리케이션을 빌드하는 과정은 실질적으로는 정의된 각 서비스마다 docker image build 명령을 실행하는 과


* LABEL 인스트럭션 : Dockerfile 스크립트에 정의된 키-값 쌍을 빌드되는 이미지에 적용
* ARG 인스트럭션 : 이미지를 빌드하는 시점에서만 유효한 환경변수를 설정
* 컴포즈 파일 정의의 build 블록
    1) context : 도커가 빌드 중에 사용할 작업 디랙터리에 대한 경로
    2) dockerfile : dockerfile 스크립트의 경로
    3) args : 빌드 시에 전달한 인자.

---
## 11.4 도커 외의 의존 모듈이 불필요한 CI 작업 만들기
* 의존 모듈이 별도로 필요하지 않다는 점은 컨테이너에서 수행하는 CI의 주된 장점.

---
## 11.5 CI 파이프라인에 관계된 컨테이너
* 안전 소프트웨어 공급 체인 : 기업 규모와 상관없이 배포할 소프트웨어의 안전성을 담보한다.
